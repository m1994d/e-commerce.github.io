// PRODUCTOS
const productos = [
    // Facial
    {
        id: "Facial-01",
        titulo: "Facial 01",
        imagen: "./img/Facial/0-1.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-02",
        titulo: "Facial 02",
        imagen: "./img/Facial/0-2.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-03",
        titulo: "Facial 03",
        imagen: "./img/Facial/0-3.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-04",
        titulo: "Facial 04",
        imagen: "./img/Facial/0-4.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 05",
        imagen: "./img/Facial/0-5.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 06",
        imagen: "./img/Facial/0-6.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 07",
        imagen: "./img/Facial/0-7.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 08",
        imagen: "./img/Facial/0-8.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 09",
        imagen: "./img/Facial/0-9.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 10",
        imagen: "./img/Facial/0-10.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 11",
        imagen: "./img/Facial/0-11.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 12",
        imagen: "./img/Facial/0-12.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 13",
        imagen: "./img/Facial/0-13.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 14",
        imagen: "./img/Facial/0-14.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 15",
        imagen: "./img/Facial/0-15.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 16",
        imagen: "./img/Facial/0-16.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 17",
        imagen: "./img/Facial/0-17.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 18",
        imagen: "./img/Facial/0-18.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 19",
        imagen: "./img/Facial/0-19.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 20",
        imagen: "./img/Facial/0-20.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    {
        id: "Facial-05",
        titulo: "Facial 0-21",
        imagen: "./img/Facial/0-21.png",
        categoria: {
            nombre: "Facial",
            id: "Facial"
        },
        precio: 1000
    },
    // Rostro
    {
        id: "Rostro-04",
        titulo: "Rostro 22",
        imagen: "./img/Rostro/0-22.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 04",
        imagen: "./img/Rostro/0-23.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 24",
        imagen: "./img/Rostro/0-24.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 25",
        imagen: "./img/Rostro/0-25.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 26",
        imagen: "./img/Rostro/0-26.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 27",
        imagen: "./img/Rostro/0-27.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 28",
        imagen: "./img/Rostro/0-28.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 29",
        imagen: "./img/Rostro/0-29.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 30",
        imagen: "./img/Rostro/0-30.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 31",
        imagen: "./img/Rostro/0-31.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 31",
        imagen: "./img/Rostro/0-32.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 32",
        imagen: "./img/Rostro/0-32.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 33",
        imagen: "./img/Rostro/0-33.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 34",
        imagen: "./img/Rostro/0-34.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 35",
        imagen: "./img/Rostro/0-35.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 36",
        imagen: "./img/Rostro/0-36.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 37",
        imagen: "./img/Rostro/0-37.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 38",
        imagen: "./img/Rostro/0-38.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 39",
        imagen: "./img/Rostro/0-39.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 40",
        imagen: "./img/Rostro/0-40.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 5300
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 41",
        imagen: "./img/Rostro/0-41.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 42",
        imagen: "./img/Rostro/0-42.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 43",
        imagen: "./img/Rostro/0-43.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 44",
        imagen: "./img/Rostro/0-44.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 45",
        imagen: "./img/Rostro/0-45.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 46",
        imagen: "./img/Rostro/0-46.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 47",
        imagen: "./img/Rostro/0-47.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 48",
        imagen: "./img/Rostro/0-48.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 49",
        imagen: "./img/Rostro/0-49.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 50",
        imagen: "./img/Rostro/0-50.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 51",
        imagen: "./img/Rostro/0-51.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 52",
        imagen: "./img/Rostro/0-52.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 53",
        imagen: "./img/Rostro/0-53.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 54",
        imagen: "./img/Rostro/0-54.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 55",
        imagen: "./img/Rostro/0-55.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 56",
        imagen: "./img/Rostro/0-56.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 57",
        imagen: "./img/Rostro/0-57.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 58",
        imagen: "./img/Rostro/0-58.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 59",
        imagen: "./img/Rostro/0-59.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 60",
        imagen: "./img/Rostro/0-60.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 61",
        imagen: "./img/Rostro/0-61.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 62",
        imagen: "./img/Rostro/0-62.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    {
        id: "Rostro-04",
        titulo: "Rostro 63",
        imagen: "./img/Rostro/0-63.png",
        categoria: {
            nombre: "Rostro",
            id: "Rostro"
        },
        precio: 1000
    },
    // Corporal
    {
        id: "Corporal-01",
        titulo: "Corporal 64",
        imagen: "./img/Corporal/0-64.png",
        categoria: {
            nombre: "Corporal",
            id: "Corporal"
        },
        precio: 1000
    },
    {
        id: "Corporal-01",
        titulo: "Corporal 65",
        imagen: "./img/Corporal/0-65.png",
        categoria: {
            nombre: "Corporal",
            id: "Corporal"
        },
        precio: 1000
    },
    {
        id: "Corporal-01",
        titulo: "Corporal 66",
        imagen: "./img/Corporal/0-66.png",
        categoria: {
            nombre: "Corporal",
            id: "Corporal"
        },
        precio: 1000
    },
    {
        id: "Corporal-01",
        titulo: "Corporal 67",
        imagen: "./img/Corporal/0-67.png",
        categoria: {
            nombre: "Corporal",
            id: "Corporal"
        },
        precio: 1000
    },
    {
        id: "Corporal-01",
        titulo: "Corporal 68",
        imagen: "./img/Corporal/0-68.png",
        categoria: {
            nombre: "Corporal",
            id: "Corporal"
        },
        precio: 1000
    },
    {
        id: "Corporal-01",
        titulo: "Corporal 69",
        imagen: "./img/Corporal/0-69.png",
        categoria: {
            nombre: "Corporal",
            id: "Corporal"
        },
        precio: 1000
    },
    
    // Accesorios

    {
        id: "Accesorios",
        titulo: "Accesorios 70",
        imagen: "./img/Accesorios/0-70.png",
        categoria: {
            nombre: "Accesorios",
            id: "Accesorios"
        },
        precio: 1000
    },
    {
        id: "Accesorios",
        titulo: "Accesorios 71",
        imagen: "./img/Accesorios/0-71.png",
        categoria: {
            nombre: "Accesorios",
            id: "Accesorios"
        },
        precio: 1000
    },
    {
        id: "Accesorios",
        titulo: "Accesorios 72",
        imagen: "./img/Accesorios/0-72.png",
        categoria: {
            nombre: "Accesorios",
            id: "Accesorios"
        },
        precio: 1000
    },
    {
        id: "Accesorios",
        titulo: "Accesorios 73",
        imagen: "./img/Accesorios/0-73.png",
        categoria: {
            nombre: "Accesorios",
            id: "Accesorios"
        },
        precio: 1000
    },
    {
        id: "Accesorios",
        titulo: "Accesorios 74",
        imagen: "./img/Accesorios/0-74.png",
        categoria: {
            nombre: "Accesorios",
            id: "Accesorios"
        },
        precio: 1000
    },
    {
        id: "Accesorios",
        titulo: "Accesorios 75",
        imagen: "./img/Accesorios/0-75.png",
        categoria: {
            nombre: "Accesorios",
            id: "Accesorios"
        },
        precio: 1000
    },
    {
        id: "Accesorios",
        titulo: "Accesorios 76",
        imagen: "./img/Accesorios/0-76.png",
        categoria: {
            nombre: "Accesorios",
            id: "Accesorios"
        },
        precio: 1000
    },
];


const contenedorProductos = document.querySelector("#contenedor-productos");
const botonesCategorias = document.querySelectorAll(".boton-categoria");
const tituloPrincipal = document.querySelector("#titulo-principal");
let botonesAgregar = document.querySelectorAll(".producto-agregar");
const numerito = document.querySelector("#numerito");


function cargarProductos(productosElegidos) {

    contenedorProductos.innerHTML = "";

    productosElegidos.forEach(producto => {

        const div = document.createElement("div");
        div.classList.add("producto");
        div.innerHTML = `
            <img class="producto-imagen" src="${producto.imagen}" alt="${producto.titulo}">
            <div class="producto-detalles">
                <h3 class="producto-titulo">${producto.titulo}</h3>
                <p class="producto-precio">$${producto.precio}</p>
                <button class="producto-agregar" id="${producto.id}">Agregar</button>
            </div>
        `;

        contenedorProductos.append(div);
    })

    actualizarBotonesAgregar();
}

cargarProductos(productos);

botonesCategorias.forEach(boton => {
    boton.addEventListener("click", (e) => {

        botonesCategorias.forEach(boton => boton.classList.remove("active"));
        e.currentTarget.classList.add("active");

        if (e.currentTarget.id != "todos") {
            const productoCategoria = productos.find(producto => producto.categoria.id === e.currentTarget.id);
            tituloPrincipal.innerText = productoCategoria.categoria.nombre;
            const productosBoton = productos.filter(producto => producto.categoria.id === e.currentTarget.id);
            cargarProductos(productosBoton);
        } else {
            tituloPrincipal.innerText = "Todos los productos";
            cargarProductos(productos);
        }

    })
});

function actualizarBotonesAgregar() {
    botonesAgregar = document.querySelectorAll(".producto-agregar");

    botonesAgregar.forEach(boton => {
        boton.addEventListener("click", agregarAlCarrito);
    });
}

let productosEnCarrito;

let productosEnCarritoLS = localStorage.getItem("productos-en-carrito");

if (productosEnCarritoLS) {
    productosEnCarrito = JSON.parse(productosEnCarritoLS);
    actualizarNumerito();
} else {
    productosEnCarrito = [];
}

function agregarAlCarrito(e) {
    const idBoton = e.currentTarget.id;
    const productoAgregado = productos.find(producto => producto.id === idBoton);

    if(productosEnCarrito.some(producto => producto.id === idBoton)) {
        const index = productosEnCarrito.findIndex(producto => producto.id === idBoton);
        productosEnCarrito[index].cantidad++;
    } else {
        productoAgregado.cantidad = 1;
        productosEnCarrito.push(productoAgregado);
    }

    actualizarNumerito();

    localStorage.setItem("productos-en-carrito", JSON.stringify(productosEnCarrito));
}

function actualizarNumerito() {
    let nuevoNumerito = productosEnCarrito.reduce((acc, producto) => acc + producto.cantidad, 0);
    numerito.innerText = nuevoNumerito;
}